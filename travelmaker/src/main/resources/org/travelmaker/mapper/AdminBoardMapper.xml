<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.rog//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.travelmaker.mapper.AdminBoardMapper">

<resultMap type="org.travelmaker.domain.BoardVO" id="VOResult">
	<result property="boardNo" column="BOARD_NO"/>
	<result property="schNo" column="SCH_NO"/>
	<result property="boardTitle" column="BOARD_TITLE"/>
	<result property="wDate" column="W_DATE"/>
	<result property="pickCnt" column="PICK_CNT"/>
	<result property="modDate" column="MOD_DATE"/>
	<result property="vCnt" column="V_CNT"/>
	<result property="hidden" column="HIDDEN"/>
</resultMap>

	<select id="getBoardList" resultMap="VOResult">
 <![CDATA[
	select /*+ index_desc(tbl_board pk_board) */ * from board where board_no>0]]>
	</select>

	<update id="removePost">
		update board set hidden='숨김' where board_no=#{result}
	</update>
	
		<select id ="searchBoardWriter" resultMap="VOResult">
			select /*+ index_desc(member pk_board) */ * 
			from board b, schedule s
			where 
			<choose>
				<when test="type == 'title'">
					(board_title like '%'||#{keyword}||'%')
				</when>
				<when test="type == 'mem_no'">
					(mem_no = #{keyword})
				</when>
			</choose> and b.sch_no = s.sch_no
	</select>

</mapper>
	